# ===========================================
# Email Filter System - Environment Variables
# ===========================================
# Copy this file to .env and fill in your values

# ===========================================
# VPS API Configuration
# ===========================================

# Server port for the API service
API_PORT=3000

# API authentication token (generate a secure random string)
# Used by Email Worker to authenticate webhook requests
API_TOKEN=your-secure-api-token-here

# Default email address to forward emails when no rules match
DEFAULT_FORWARD_TO=your-email@gmail.com

# Database path (for systemd deployment)
DB_PATH=/opt/email-filter/data/filter.db

# Public URL of this VPS API (used to check if workers are connected to this VPS)
# Example: https://your-domain.com or http://your-ip:3000
VPS_PUBLIC_URL=http://your-vps-ip:3000

# ===========================================
# JWT Authentication Configuration
# ===========================================

# Secret key for signing JWT tokens (CHANGE IN PRODUCTION!)
# Generate a secure random string: openssl rand -base64 32
JWT_SECRET=your-jwt-secret-change-in-production

# Token expiration time (default: 24h)
# Supported formats: 1h, 24h, 7d, etc.
JWT_EXPIRY=24h

# Default admin credentials (used on first startup when no users exist)
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=change-this-password-in-production

# ===========================================
# Admin Panel Configuration
# ===========================================

# Server port for the admin panel
ADMIN_PORT=3001

# Admin panel password for authentication
ADMIN_PASSWORD=your-secure-admin-password

# Session secret for cookie signing (generate a secure random string)
SESSION_SECRET=your-session-secret-here

# Admin database path (for systemd deployment)
ADMIN_DB_PATH=/opt/email-filter/data/admin.db

# ===========================================
# Dynamic Rules Configuration
# ===========================================

# Enable/disable dynamic rule creation
DYNAMIC_ENABLED=true

# Time window in minutes for counting repeated subjects
DYNAMIC_TIME_WINDOW=60

# Number of emails with same subject to trigger dynamic rule
DYNAMIC_THRESHOLD=5

# Hours before unused dynamic rules expire
DYNAMIC_EXPIRATION=48

# ===========================================
# Cloudflare Email Worker Configuration
# ===========================================
# These are configured in wrangler.toml, not here
# VPS_API_URL=https://your-vps-domain.com/api/webhook/email
# VPS_API_TOKEN=same-as-API_TOKEN-above

# ===========================================
# Production Settings
# ===========================================

# Node environment
NODE_ENV=production

# Server host binding
HOST=0.0.0.0
